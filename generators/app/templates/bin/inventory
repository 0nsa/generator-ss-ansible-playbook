#!/usr/bin/env python

"""
$ ENV=dev ansible-playbook -i bin/inventory playbooks/all.yml
$ ENV=dev inventory.py --list
"""

import argparse
import json
import os
import sys

sys.path.append(os.path.abspath(os.path.join(
    os.path.dirname(__file__), "..", "lib")))

from inventory import get_inventories  # noqa: E402


def get_parser():
    parser = argparse.ArgumentParser()
    parser.add_argument("--list", action="store_true")
    return parser


def main():
    parser = get_parser()
    args = parser.parse_args()
    if args.list:
        json.dump(get_inventories()[os.environ["ENV"]], sys.stdout)


if __name__ == "__main__":
    main()
